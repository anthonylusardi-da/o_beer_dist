(function(e){function t(t){for(var n,c,i=t[0],s=t[1],u=t[2],p=0,d=[];p<i.length;p++)c=i[p],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var s=r[i];0!==a[s]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/o_beer_dist/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("b-navbar",{attrs:{id:"nav"}},[n("b-navbar-brand",{attrs:{href:"#"}},[n("code",[e._v("O(🍻)")])]),n("b-navbar-nav",[n("b-nav-item",[n("router-link",{attrs:{to:"/"}},[e._v("Home")])],1)],1),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",[e.party?n("div",[e._v(" Logged in as "+e._s(e.party)+" "),n("b-button",{attrs:{variant:"outline-danger"},on:{"~click":function(t){return e.logoutParty()}}},[e._v("Logout")])],1):n("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1)],1)],1),n("b-container",[n("b-row",[n("b-col",[n("img",{staticClass:"img-fluid",attrs:{alt:"Vue logo",src:r("cf05")}})])],1),n("router-view"),n("b-row",{staticClass:"my-5"},[n("b-col",[e._v(" Frontend made with "),n("a",{attrs:{href:"https://vuejs.org/"}},[e._v("Vue.js")]),e._v(". Backend made with "),n("a",{attrs:{href:"https://daml.com"}},[e._v("DAML")]),e._v(" in 32 lines of code. ")])],1),n("b-row",{staticClass:"my-5"},[n("b-col",{staticClass:"text-left"},[n("h3",{staticClass:"text-center"},[e._v("This is the whole backend, database schema, access control, json queries, business logic, everything that isn't the server")]),n("h1",{staticClass:"text-center"},[e._v("👇")]),n("pre",[e._v("            "),n("code",{staticClass:"daml bg-white"},[e._v("\ndaml 1.2\nmodule Beer where\n\ntemplate BeerProposal -- This is the template for a contract. Akin to object and instance.\n  with\n    beer : Beer\n  where\n    signatory beer.giver -- Signatories say who is needed to create an instantiated contract\n    observer beer.recipient -- Observers say who else can see the contract\n    ensure beer.giver /= beer.recipient -- Assure preconditions\n\n    choice Accept_Beer : ContractId Beer\n      controller beer.recipient -- Give different participants different choices\n        do\n          create beer -- Here the recipient of a proposal can choose to accept the beer contract\n\n    choice Reject_Beer : ()      -- Every choice consumes a contract (unless specified)\n      controller beer.recipient  -- so contracts are atomic and events are sequential\n        do\n          pure ()                -- This choice simply consumes the existing contract\n\n    choice Cancel_Beer : ()      -- Note how this choice is very similar to the previous\n      controller beer.giver\n        do\n          pure ()\n\ntemplate Beer  -- Once the recipient chooses to Accept_Beer in BeerProposal this contract is created\n  with\n    giver : Party\n    recipient : Party\n  where\n    signatory giver, recipient\n    ensure giver /= recipient\n\n    choice Beer_Received : ()  -- These are really just helper functions, this functionality is\n      controller recipient     -- equivalent to spending a UTXO or as DAML calls it, archiving a contract\n        do\n          pure ()\n            ")]),e._v("\n          ")])])],1)],1)],1)},o=[],c=r("5530"),i=(r("96cf"),r("1da1")),s=r("2f62"),u=r("14b7"),l=r.n(u),p=r("bc3a"),d=r.n(p),f=r("0e44");n["default"].use(s["a"]);var b=new s["a"].Store({plugins:[Object(f["a"])({paths:["party","ledger"]})],state:{party:null,beersOwed:null,beerProposals:null,ledger:d.a.create({baseURL:"https://beerdb.woah.xyz",timeout:1e4,headers:{"Content-Type":"application/json"}})},mutations:{loginParty:function(e,t){var r=t.party,n=t.authHeader;e.party=r,e.ledger.defaults.headers.common["Authorization"]=n},logoutParty:function(e){e.party=null,e.ledger.defaults.headers.common["Authorization"]="",e.beers=null,e.beerProposals=null},updateBeersOwed:function(e,t){e.beersOwed=t},updateBeerProposals:function(e,t){e.beerProposals=t}},actions:{updateParty:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,e.state,a={ledgerId:"o_beer",applicationId:"HTTP-JSON-API-Gateway",party:t},o=l.a.sign(a,"secret"),c="Bearer "+o,n("loginParty",{party:t,authHeader:c});case 5:case"end":return r.stop()}}),r)})))()},getBeersOwed:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.state,a={templateIds:["Beer:Beer"],query:{}},t.next=4,n.ledger.post("/contracts/search",a);case 4:o=t.sent,r("updateBeersOwed",o.data.result);case 6:case"end":return t.stop()}}),t)})))()},getBeerProposals:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,o={templateIds:["Beer:BeerProposal"],query:{beer:{recipient:t.party}}},r.next=4,a.ledger.post("/contracts/search",o);case 4:c=r.sent,n("updateBeerProposals",c.data.result);case 6:case"end":return r.stop()}}),r)})))()},exerciseChoice:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,o,c,i,s,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.commit,n=e.state,a=t.templateId,o=t.contractId,c=t.choice,i=t.argument,s=void 0===i?{}:i,u={templateId:a,contractId:o,choice:c,argument:s},r.next=5,n.ledger.post("/command/exercise",u);case 5:case"end":return r.stop()}}),r)})))()},createBeerProposal:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.commit,n=e.state,a={templateId:"Beer:BeerProposal",argument:{beer:{templateId:"Beer:Beer",giver:n.party,recipient:t}}},r.prev=2,r.next=5,n.ledger.post("/command/create",a);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](2),console.log("Couldn't create contract "+r.t0);case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()}},modules:{}}),h=r("a70e"),m=r.n(h),v=r("3f38"),g=r.n(v),y=(r("8da8"),{name:"app",store:b,computed:Object(c["a"])({},Object(s["b"])(["party"])),created:function(){m.a.initHighlightingOnLoad(),m.a.registerLanguage("daml",g.a)},methods:{updateParty:function(e){e&&this.$store.commit("updateParty",e)},logoutParty:function(){this.party&&this.$store.commit("logoutParty")}}}),w=y,_=(r("034f"),r("2877")),x=Object(_["a"])(w,a,o,!1,null,null,null),P=x.exports,O=r("8c4f"),B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("Login")],1)},j=[],k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-row",[r("b-col",{staticClass:"col-6 mx-auto"},[r("b-input-group",[r("b-form-input",{model:{value:e.newParty,callback:function(t){e.newParty=t},expression:"newParty"}}),r("b-input-group-append",[r("router-link",{attrs:{to:"/"}},[r("b-button",{attrs:{variant:"primary"},on:{"~click":function(t){return e.updateParty(t)}}},[e._v(" Login ")])],1)],1)],1)],1)],1)],1)},C=[],R={name:"login",store:b,data:function(){return{newParty:null}},computed:Object(c["a"])({},Object(s["b"])(["party","jwt_auth"])),methods:{updateParty:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.newParty){t.next=3;break}return t.next=3,e.$store.dispatch("updateParty",e.newParty);case 3:case"end":return t.stop()}}),t)})))()}}},I=R,$=Object(_["a"])(I,k,C,!1,null,null,null),A=$.exports,L={name:"login",components:{Login:A}},T=L,S=Object(_["a"])(T,B,j,!1,null,null,null),H=S.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("Home")],1)},M=[],q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"home-component"},[e.party?r("span",[r("b-row",[r("b-col",{staticClass:"my-3"},[r("b-input-group",{attrs:{prepend:"Give a beer to"}},[r("b-form-input",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createBeerProposal(t)}},model:{value:e.recipient,callback:function(t){e.recipient="string"===typeof t?t.trim():t},expression:"recipient"}}),r("b-input-group-append",[r("b-button",{attrs:{variant:"primary"},on:{click:e.createBeerProposal}},[e._v("Give "+e._s(e.recipient)+" Beer")])],1)],1)],1)],1),r("b-row",[r("b-col",[r("b-card",{attrs:{"no-body":"",header:"Beers Offered"}},[r("b-list-group",{attrs:{id:"beerProposals"}},e._l(e.beerProposals,(function(t){return r("b-list-group-item",{key:t.contractId.replace("#","").replace(":",".")},[t.payload.beer.recipient==e.party?r("span",[e._v(" "+e._s(t.payload.beer.giver)+" offered you a beer "),r("b-button",{staticClass:"mx-1",attrs:{variant:"primary"},on:{"~click":function(r){return e.exerciseChoice(t,"Accept_Beer")}}},[e._v("Accept")]),r("b-button",{attrs:{variant:"danger"},on:{"~click":function(r){return e.exerciseChoice(t,"Reject_Beer")}}},[e._v("Reject")])],1):r("span",[e._v(" You offered "+e._s(t.payload.beer.recipient)+" a beer "),r("b-button",{attrs:{variant:"danger"},on:{"~click":function(r){return e.exerciseChoice(t,"Cancel_Beer")}}},[e._v("Cancel")])],1)])})),1)],1)],1),r("b-col",[r("b-card",{attrs:{"no-body":"",header:"Beers Owed"}},[r("b-list-group",{attrs:{id:"beersOwed"}},e._l(e.beersOwed,(function(t){return r("b-list-group-item",{key:t.contractId},[t.payload.giver==e.party?r("span",[e._v("You owe "+e._s(t.payload.recipient)+" a beer")]):r("span",[e._v(" "+e._s(t.payload.giver)+" owes you a beer "),r("b-button",{attrs:{variant:"success"},on:{"~click":function(r){return e.exerciseChoice(t,"Beer_Received")}}},[e._v("Received")])],1)])})),1)],1)],1)],1)],1):r("span",[r("b-row",[r("b-col",[e._v(" Please "),r("router-link",{attrs:{to:"/login"}},[e._v("login")])],1)],1)],1)])},G=[],z=(r("bc3a"),{name:"home",store:b,data:function(){return{parties:null,recipient:null,newContract:null}},beforeCreated:function(){},computed:Object(c["a"])({},Object(s["b"])(["root_url","jwt_auth","party","beersOwed","beerProposals","ledger"])),mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.party){t.next=9;break}return console.log("Setting up the party..."),t.next=4,e.$store.dispatch("updateParty",e.party);case 4:return console.log("Getting the beers..."),t.next=7,e.$store.dispatch("getBeersOwed");case 7:return t.next=9,e.$store.dispatch("getBeerProposals");case 9:case"end":return t.stop()}}),t)})))()},methods:{createBeerProposal:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("createBeerProposal",e.recipient);case 2:return t.next=4,e.$store.dispatch("getBeerProposals");case 4:e.recipient=null;case 5:case"end":return t.stop()}}),t)})))()},exerciseChoice:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.templateId,o=e.contractId,n.next=4,r.$store.dispatch("exerciseChoice",{templateId:a,contractId:o,choice:t});case 4:return n.next=6,r.$store.dispatch("getBeerProposals");case 6:return n.next=8,r.$store.dispatch("getBeersOwed");case 8:case"end":return n.stop()}}),n)})))()}}}),J=z,D=Object(_["a"])(J,q,G,!1,null,null,null),N=D.exports,U={name:"home",components:{Home:N}},V=U,Y=Object(_["a"])(V,E,M,!1,null,null,null),F=Y.exports;n["default"].use(O["a"]);var X=[{path:"/",name:"home",component:F},{path:"/login",name:"login",component:H}],K=new O["a"]({routes:X}),Q=K,W=r("5f5b"),Z=r("b1e0");r("f9e3"),r("2dd8");n["default"].use(W["a"]),n["default"].use(Z["a"]),n["default"].config.productionTip=!1,new n["default"]({router:Q,store:b,render:function(e){return e(P)}}).$mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},"85ec":function(e,t,r){},9:function(e,t){},cf05:function(e,t,r){e.exports=r.p+"img/logo.8ef04531.png"}});
//# sourceMappingURL=app.6ca852aa.js.map